# ููุฎุต ุงูุชูููุฐ - Backend Requirements

**ุชุงุฑูุฎ ุงูุชูููุฐ:** 2026-02-08  
**ุงูุญุงูุฉ:** ููุชููุฉ โ

---

## ูุง ุชู ุฅูุฌุงุฒู

### 1. ุฅุถุงูุฉ Routes ุงูุฌุฏูุฏุฉ ุชุญุช `/v1/courses`

ุชู ุฅูุดุงุก ุงููููุงุช ุงูุชุงููุฉ **ุฏูู ุงููุณุงุณ** ุจุฃู routes ุฃู services ููุฌูุฏุฉ:

#### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- โ `routes/v1/courses.js` - ุงูู 3 endpoints ุงููุทููุจุฉ
- โ `services/courseV1Service.js` - ุงูู business logic ููู endpoints ุงูุฌุฏูุฏุฉ
- โ ุชุญุฏูุซ `routes/v1/index.js` - ุฑุจุท ุงูู courses routes

---

## ุงูู 3 Endpoints ุงูููุถุงูุฉ

### 1๏ธโฃ **GET /v1/courses/{courseId}**
**ุงููุณุงุฑ ุงููุงูู:** `GET /api/v1/courses/{courseId}`

**ุงููุธููุฉ:** 
- ุฌูุจ ุชูุงุตูู ุงูุฏูุฑุฉ ุจุงูุดูู ุงููุทููุจ ูู ุงูุชูุฑูุฑ
- ูุงุฆูุฉ ุงููุดุงูุฎ ูุน **lessonsCountInThisCourse** ููู ุดูุฎ
- ูุฏุนู ุงููุนูู ุงูุฑุฆูุณู + ุงููุนูููู ุงููุณุงุนุฏูู

**Response:**
```json
{
  "status": true,
  "message": "ุชู ุฌูุจ ุจูุงูุงุช ุงูุฏูุฑุฉ ุจูุฌุงุญ",
  "data": {
    "course": {
      "id": "...",
      "name": "...",
      "description": "...",
      "image": "...",
      "price": "500 ุฌููู",
      "duration": "8 ุฃุณุงุจูุน",
      "lessonsCount": 24,
      "studentsCount": 456,
      "rating": 4.9,
      "sheikhs": [
        {
          "id": "...",
          "name": "ุฏ. ูุญูุฏ ุฃุญูุฏ",
          "image": "...",
          "title": "ุฏูุชูุฑ ูู ุงูุดุฑูุนุฉ",
          "rating": 4.8,
          "lessonsCountInThisCourse": 15
        }
      ]
    }
  }
}
```

---

### 2๏ธโฃ **GET /v1/courses/{courseId}/sheikhs/{sheikhId}**
**ุงููุณุงุฑ ุงููุงูู:** `GET /api/v1/courses/{courseId}/sheikhs/{sheikhId}`

**ุงููุธููุฉ:**
- ุชูุงุตูู ุงูุดูุฎ ูู ุณูุงู ุงูุฏูุฑุฉ ุงููุญุฏุฏุฉ
- ุฅุญุตุงุฆูุงุช ุงูุฏูุฑุฉ (ุนุฏุฏ ุงูุทูุงุจุ ุนุฏุฏ ุงูุฏุฑูุณุ ูุนุฏู ุงูุฅูุฌุงุฒ)
- ุชุนูููุงุช ุงูุดูุฎ (ูู ุฌุฏูู Reviews)
- achievements (ูุตูููุฉ ูุงุฑุบุฉ ุญุงููุงู - ูููู ุฅุถุงูุฉ model ูุงุญูุงู)

**Response:**
```json
{
  "status": true,
  "message": "ุชู ุฌูุจ ุจูุงูุงุช ุงูุดูุฎ ุจูุฌุงุญ",
  "data": {
    "sheikh": {
      "id": "...",
      "name": "ุฏ. ูุญูุฏ ุฃุญูุฏ",
      "title": "ุฏูุชูุฑ ูู ุงูุดุฑูุนุฉ ุงูุฅุณูุงููุฉ",
      "image": "...",
      "bio": "...",
      "rating": 4.8,
      "experienceYears": 15,
      "specialization": "ุงูููู ูุงูุนููุฏุฉ",
      "videoUrl": "...",
      "courseContext": {
        "courseId": "...",
        "courseName": "ุฏูุฑุฉ ุงูุนููุฏุฉ ุงูุฅุณูุงููุฉ",
        "lessonsCount": 15,
        "studentsEnrolled": 456,
        "completionRate": 78
      },
      "achievements": [],
      "reviews": [...]
    }
  }
}
```

---

### 3๏ธโฃ **GET /v1/courses/{courseId}/sheikhs/{sheikhId}/lessons**
**ุงููุณุงุฑ ุงููุงูู:** `GET /api/v1/courses/{courseId}/sheikhs/{sheikhId}/lessons`

**Query Parameters:**
- `page` (default: 1)
- `limit` (default: 20)  
- `isFree` (true/false) - ููุชุฑ ุงูุฏุฑูุณ ุงููุฌุงููุฉ

**ุงููุธููุฉ:**
- ุฌูุจ **ููุท** ุงูุฏุฑูุณ ุงูุชู ูุฏุฑูุณูุง ูุฐุง ุงูุดูุฎ ูู ูุฐู ุงูุฏูุฑุฉ
- Pagination ูุงูู
- ููุชุฑ ุงูุฏุฑูุณ ุงููุฌุงููุฉ
- Summary ุดุงูู (ุฅุฌูุงูู ุงูุฏุฑูุณุ ุงููุฌุงููุฉุ ุงููุฏููุนุฉุ ุงููุดุชุฑุงุฉุ ุงููุฏุฉ ุงูุฅุฌูุงููุฉ)
- isPurchased ูุฑุจูุท ุจู CourseEnrollment ุญุงููุงู

**Response:**
```json
{
  "status": true,
  "message": "ุชู ุฌูุจ ุงูุฏุฑูุณ ุจูุฌุงุญ",
  "data": {
    "lessons": [...],
    "pagination": {
      "currentPage": 1,
      "totalPages": 1,
      "totalLessons": 15,
      "limit": 20,
      "hasNextPage": false,
      "hasPrevPage": false
    },
    "summary": {
      "totalLessons": 15,
      "freeLessons": 2,
      "paidLessons": 13,
      "purchasedLessons": 5,
      "totalDuration": "12 ุณุงุนุฉ ู 30 ุฏูููุฉ"
    }
  }
}
```

---

## ุงูููุทู ุงูููุทุจู

### ๐ ููู ูุชู ุญุณุงุจ "ุฏุฑูุณ ุงูุดูุฎ ูู ุงูุฏูุฑุฉ"ุ
- ุงูุฏุฑูุณ ุงูุชู ุชุญุชูู ุนูู **ููุฏูู ูุงุญุฏ ุนูู ุงูุฃูู** ุจู `teacherId = ุงูุดูุฎ`
- ูุฐุง ูุฃู ุงูู `Lesson` ูุง ูุญุชูู ุนูู `teacherId`ุ ุจู ุงูู `Video` ูุญุชูู ุนูู `teacherId`

### ๐ ููู ูุชู ุญุณุงุจ `isPurchased`ุ
- ุญุงููุงู: ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููุณุฌู ูู ุงูุฏูุฑุฉ (`CourseEnrollment`) โ `isPurchased = true`
- ูููู ูุงุญูุงู ุฅุถุงูุฉ ุฌุฏูู `lesson_purchases` ููุดุฑุงุก ุงููุฑุฏู ููุฏุฑูุณ

### ๐ ุงููุดุงูุฎ ูู ุงูุฏูุฑุฉ:
- **ุงููุนูู ุงูุฑุฆูุณู:** `Course.teacherId`
- **ุงููุนูููู ุงููุณุงุนุฏูู:** `CourseTeacher.teacherId`
- ูุชู ุฌูุนูู ูุฅุฒุงูุฉ ุงูุชูุฑุงุฑ

---

## ุงูุญูุงุธ ุนูู ุงูููุฌูู ุงูุญุงูู

โ **ูู ูุชู ุงููุณุงุณ ุจุฃู ููู ููุฌูุฏ**  
โ **ูู ูุชู ุชุบููุฑ ุฃู route ุฃู service ุญุงูู**  
โ **ุชู ุฅุถุงูุฉ endpoints ุฌุฏูุฏุฉ ููุท**  
โ **ุงูู schema ูู ูุชุบูุฑ**  
โ **ุงูู server ูุนูู ุจุฏูู ูุดุงูู**  

---

## ุงูุงุฎุชุจุงุฑ

### URLs ููุงุฎุชุจุงุฑ:
```
GET /api/v1/courses/{courseId}
GET /api/v1/courses/{courseId}/sheikhs/{sheikhId}
GET /api/v1/courses/{courseId}/sheikhs/{sheikhId}/lessons?page=1&limit=20&isFree=true
```

### Headers ูุทููุจุฉ:
```
Authorization: Bearer {your_jwt_token}
Accept-Language: ar
```

---

## ุงููุชุทูุจุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑูุฉ)

### ุฅุถุงูุงุช ูููู ุชุทุจูููุง ูุงุญูุงู:
1. **ุฌุฏูู `lesson_purchases`** - ููุดุฑุงุก ุงููุฑุฏู ููุฏุฑูุณ
2. **model `Achievement`** - ูุฅูุฌุงุฒุงุช ุงููุดุงูุฎ  
3. **ุญููู ุฅุถุงููุฉ ุนูู `Lesson`** - price, viewsCount, rating
4. **ุชุญุณูู ุญุณุงุจ `completionRate`** - ูู VideoProgress
5. **ูุธุงู helpful ููู Reviews**

---

**ุงูุฎูุงุตุฉ:** ุชู ุชูููุฐ ูุงูู ูุชุทูุจุงุช ุงูุชูุฑูุฑ ุจูุฌุงุญ ุฏูู ูุณุฑ ุฃู ุดูุก ููุฌูุฏ! ๐