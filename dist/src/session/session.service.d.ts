import { ConfigService } from '@nestjs/config';
import { PrismaService } from '../prisma/prisma.service';
import { CreateSessionDto } from './dto';
export declare class SessionService {
    private prisma;
    private config;
    private agoraAppId;
    private agoraAppCertificate;
    constructor(prisma: PrismaService, config: ConfigService);
    create(bookingId: string, dto: CreateSessionDto): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        duration: number | null;
        type: import(".prisma/client").$Enums.SessionType;
        bookingId: string;
        startedAt: Date | null;
        roomId: string;
        agoraToken: string | null;
        endedAt: Date | null;
        recordingUrl: string | null;
    }>;
    getSession(bookingId: string, userId: string): Promise<{
        agoraToken: string;
        booking: {
            teacher: {
                user: {
                    id: string;
                    email: string;
                    phone: string | null;
                    password: string;
                    firstName: string;
                    firstNameAr: string | null;
                    lastName: string;
                    lastNameAr: string | null;
                    avatar: string | null;
                    role: import(".prisma/client").$Enums.UserRoleEnum;
                    status: import(".prisma/client").$Enums.UserStatus;
                    language: string;
                    emailVerified: boolean;
                    phoneVerified: boolean;
                    createdAt: Date;
                    updatedAt: Date;
                    currentSurah: string | null;
                    currentSurahAr: string | null;
                    memorizationLevel: string | null;
                    memorizationLevelAr: string | null;
                    totalMemorized: number | null;
                    age: number | null;
                    gender: import(".prisma/client").$Enums.Gender | null;
                    memorized_parts: number | null;
                    parent_phone: string | null;
                    student_phone: string | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                certificates: string | null;
                canIssueCertificates: boolean | null;
                introVideoUrl: string | null;
                specialties: string | null;
                specialtiesAr: string | null;
                userId: string;
                bio: string | null;
                bioAr: string | null;
                image: string | null;
                experience: number | null;
                hourlyRate: number;
                rating: number;
                totalReviews: number;
                isApproved: boolean;
                approvedAt: Date | null;
                approvedBy: string | null;
                readingType: string | null;
                readingTypeAr: string | null;
            };
            student: {
                id: string;
                email: string;
                phone: string | null;
                password: string;
                firstName: string;
                firstNameAr: string | null;
                lastName: string;
                lastNameAr: string | null;
                avatar: string | null;
                role: import(".prisma/client").$Enums.UserRoleEnum;
                status: import(".prisma/client").$Enums.UserStatus;
                language: string;
                emailVerified: boolean;
                phoneVerified: boolean;
                createdAt: Date;
                updatedAt: Date;
                currentSurah: string | null;
                currentSurahAr: string | null;
                memorizationLevel: string | null;
                memorizationLevelAr: string | null;
                totalMemorized: number | null;
                age: number | null;
                gender: import(".prisma/client").$Enums.Gender | null;
                memorized_parts: number | null;
                parent_phone: string | null;
                student_phone: string | null;
            };
        } & {
            id: string;
            status: import(".prisma/client").$Enums.BookingStatus;
            createdAt: Date;
            updatedAt: Date;
            teacherId: string;
            studentId: string;
            date: Date;
            startTime: string;
            duration: number;
            price: number;
            discount: number;
            totalPrice: number;
            notes: string | null;
            cancelledAt: Date | null;
            cancelledBy: string | null;
        };
        id: string;
        createdAt: Date;
        updatedAt: Date;
        duration: number | null;
        type: import(".prisma/client").$Enums.SessionType;
        bookingId: string;
        startedAt: Date | null;
        roomId: string;
        endedAt: Date | null;
        recordingUrl: string | null;
    }>;
    startSession(bookingId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        duration: number | null;
        type: import(".prisma/client").$Enums.SessionType;
        bookingId: string;
        startedAt: Date | null;
        roomId: string;
        agoraToken: string | null;
        endedAt: Date | null;
        recordingUrl: string | null;
    }>;
    endSession(bookingId: string, recordingUrl?: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        duration: number | null;
        type: import(".prisma/client").$Enums.SessionType;
        bookingId: string;
        startedAt: Date | null;
        roomId: string;
        agoraToken: string | null;
        endedAt: Date | null;
        recordingUrl: string | null;
    }>;
    private generateAgoraToken;
    private buildToken;
    private buildContent;
    private generateSignature;
}
