{
  "info": {
    "name": "Shaykhi API",
    "description": "API collection for Shaykhi Quran teaching platform",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Sign Up",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"student@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"Ahmed\",\n  \"firstNameAr\": \"أحمد\",\n  \"lastName\": \"Mohamed\",\n  \"lastNameAr\": \"محمد\",\n  \"role\": \"STUDENT\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "signup"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', jsonData.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refreshToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"student@example.com\",\n  \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Ahmed\",\n  \"firstNameAr\": \"أحمد\",\n  \"lastName\": \"Mohamed\",\n  \"lastNameAr\": \"محمد\",\n  \"phone\": \"+201234567890\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            }
          }
        },
        {
          "name": "Update Password",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"oldpassword\",\n  \"newPassword\": \"newpassword123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/me/password",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me", "password"]
            }
          }
        }
      ]
    },
    {
      "name": "Teachers",
      "item": [
        {
          "name": "Get All Teachers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/teachers?specialties=tajweed,memorization&minRating=4.0",
              "host": ["{{baseUrl}}"],
              "path": ["teachers"],
              "query": [
                {
                  "key": "specialties",
                  "value": "tajweed,memorization"
                },
                {
                  "key": "minRating",
                  "value": "4.0"
                }
              ]
            }
          }
        },
        {
          "name": "Get Teacher by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/teachers/:id",
              "host": ["{{baseUrl}}"],
              "path": ["teachers", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Create Teacher Profile",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bio\": \"Experienced Quran teacher\",\n  \"bioAr\": \"مدرس قرآن ذو خبرة\",\n  \"hourlyRate\": 50,\n  \"specialties\": [\"tajweed\", \"memorization\"],\n  \"specialtiesAr\": [\"تجويد\", \"حفظ\"],\n  \"experience\": 5,\n  \"readingType\": \"HAFS\",\n  \"readingTypeAr\": \"حفص\",\n  \"introVideoUrl\": \"https://example.com/video.mp4\",\n  \"certificates\": [\"https://example.com/cert1.pdf\"],\n  \"canIssueCertificates\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/teachers",
              "host": ["{{baseUrl}}"],
              "path": ["teachers"]
            }
          }
        }
      ]
    },
    {
      "name": "Bookings",
      "item": [
        {
          "name": "Create Booking",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"teacherId\": \"teacher-id-here\",\n  \"date\": \"2024-12-25T10:00:00Z\",\n  \"startTime\": \"10:00\",\n  \"duration\": 1,\n  \"notes\": \"First session\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            }
          }
        },
        {
          "name": "Get My Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/my-bookings?status=CONFIRMED",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "my-bookings"],
              "query": [
                {
                  "key": "status",
                  "value": "CONFIRMED"
                }
              ]
            }
          }
        },
        {
          "name": "Confirm Booking",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/:id/confirm",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", ":id", "confirm"],
              "variable": [
                {
                  "key": "id",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Create Payment Intent",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentMethod\": \"stripe\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/payments/bookings/:bookingId/intent",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "bookings", ":bookingId", "intent"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Get Payment",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/bookings/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "bookings", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Sessions",
      "item": [
        {
          "name": "Create Session",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"VIDEO\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/sessions/bookings/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "bookings", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Get Session",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sessions/bookings/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "bookings", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Reviews",
      "item": [
        {
          "name": "Create Review",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"comment\": \"Great teacher!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/bookings/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "bookings", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "booking-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Get Teacher Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/teachers/:teacherId",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "teachers", ":teacherId"],
              "variable": [
                {
                  "key": "teacherId",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications?unreadOnly=true",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"],
              "query": [
                {
                  "key": "unreadOnly",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/:id/read",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", ":id", "read"],
              "variable": [
                {
                  "key": "id",
                  "value": "notification-id-here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Get Dashboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard"]
            }
          }
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/users?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/users/:id",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "user-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Ahmed\",\n  \"firstNameAr\": \"أحمد\",\n  \"lastName\": \"Mohamed\",\n  \"lastNameAr\": \"محمد\",\n  \"email\": \"ahmed@example.com\",\n  \"phone\": \"+201234567890\",\n  \"role\": \"STUDENT\",\n  \"status\": \"ACTIVE\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/:id",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "user-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Get All Teachers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/teachers?page=1&limit=20&isApproved=true",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "teachers"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "isApproved",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Get Teacher by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/teachers/:id",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "teachers", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Update Teacher",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bio\": \"Experienced Quran teacher\",\n  \"bioAr\": \"مدرس قرآن ذو خبرة\",\n  \"hourlyRate\": 50,\n  \"experience\": 5,\n  \"specialties\": [\"tajweed\", \"memorization\"],\n  \"specialtiesAr\": [\"تجويد\", \"حفظ\"],\n  \"readingType\": \"HAFS\",\n  \"readingTypeAr\": \"حفص\",\n  \"introVideoUrl\": \"https://example.com/video.mp4\",\n  \"certificates\": [\"https://example.com/cert1.pdf\"],\n  \"canIssueCertificates\": true,\n  \"isApproved\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/teachers/:id",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "teachers", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Approve Teacher",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/teachers/:id/approve",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "teachers", ":id", "approve"],
              "variable": [
                {
                  "key": "id",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Reject Teacher",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/teachers/:id/reject",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "teachers", ":id", "reject"],
              "variable": [
                {
                  "key": "id",
                  "value": "teacher-id-here"
                }
              ]
            }
          }
        },
        {
          "name": "Get All Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/bookings?page=1&limit=20&status=CONFIRMED",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "bookings"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "CONFIRMED"
                }
              ]
            }
          }
        },
        {
          "name": "Get Payments Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/payments/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "payments", "stats"]
            }
          }
        }
      ]
    }
  ]
}
